<header>{{ project.name }}</header>

<div class="content">
    <div class="block month">
        <div class="valign-helper"></div>
        <div class="valign-item">
            <span class="name">
                <b>404</b>
                LÃ©gende
            </span>
        </div>
    </div>
    {% for p in projects %}
        {% if p.abbr != 'master' %}
            <div class="block day am-on pm-off am-on-{{ p.abbr }} pm-on-{{ p.abbr }}">
                <div class="valign-helper"></div>
                <div class="valign-item">
                    <span class="name">
                        <b>{{ p.abbr }}</b>
                        {{ p.name }}
                    </span>
                </div>
                <a href="../{{ p.slug }}"></a>
            </div>
        {% endif %}
    {% endfor %}
</div>

{% for year, months in calendar %}

    {% for month, days in months %}
        <div class="content">

            <div class="block month">
                <div class="valign-helper"></div>
                <div class="valign-item">
                    <span class="name">
                        <b>{{ year }}</b>
                        {{ months_array_fr[ month - 1 ] }}
                    </span>
                </div>
            </div>

            {% set time = ( months_array_en[ month - 1 ] ~ ' ' ~ year )|date() %}
            {% set daysInMonth = time|date('t') %}

            {% for day in range( 1, daysInMonth + 1 ) %}

                {% set am  = false %}
                {% set pm  = false %}
                {% set night = false %}
                {% set p   = null  %}

                {% if days[ day ] != null %}

                    {# AM OFF #}
                    {% if days[ day ].am == false or days[ day ] == false %}
                        {% set am = 'off' %}
                    {% endif %}

                    {# PM OFF #}
                    {% if days[ day ].pm == false or days[ day ] == false %}
                        {% set pm = 'off' %}
                    {% endif %}

                    {% if days[ day ].am != false and days[ day ] != false %}
                        {% set p = ( days[ day ].am == null ? days[ day ] : days[ day ].am ) %}
                        {% set am = 'on am-on-' ~ p %}
                    {% endif %}

                    {% if days[ day ].pm != false and days[ day ] != false %}
                        {% set p = ( days[ day ].pm == null ? days[ day ] : days[ day ].pm ) %}
                        {% set pm = 'on pm-on-' ~ p %}
                    {% endif %}

                    {% if days[ day ].night != false and days[ day ].night != null %}
                        {% set night = days[ day ].night %}
                    {% endif %}

                {% endif %}


                <div class="block day am-{{ am }} pm-{{ pm }}">
                    {% if night != false %}
                        <i class="icon icon-{{ night }}"></i>
                    {% endif %}
                    <div class="valign-helper"></div>
                    <div class="valign-item">
                        <span class="name">
                            <b>{{ day }}</b>
                            {% set name = ( day ~ ' ' ~ months_array_en[ month - 1 ] ~ ' ' ~ year )|date( 'w' ) %}
                            {{ days_array_fr[ name ] }}
                        </span>
                    </div>
                </div>

            {% endfor %}

        </div>
    {% endfor %}

{% endfor %}